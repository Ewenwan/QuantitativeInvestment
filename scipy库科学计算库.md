# SciPy是世界上著名的Python开源科学计算库，建立在Numpy之上。它增加的功能包括数值积分、最优化、统计和一些专用函数。

      本篇文档包括以下内容：
      1、文件的输入/输出；
      2、统计；
      3、信号处理；
      4、最优化；
      5、插值
## 1、scipy.io文件的输入和输出
      >>> from scipy import io as  spio
      >>> import numpy as np
      >>> a = np.ones((3,3))
      >>> a
      array([[ 1.,  1.,  1.],
             [ 1.,  1.,  1.],
             [ 1.,  1.,  1.]])
      >>> spio.savemat('file.mat',{'a':a})
      >>> data = spio.loadmat('file.mat', struct_as_record=True)
      >>> data
      {'a': array([[ 1.,  1.,  1.],
             [ 1.,  1.,  1.],
             [ 1.,  1.,  1.]]), '__version__': '1.0', '__header__': 'MATLAB 5.0 MAT-file Platform: posix, Created on: Fri Apr  6 20:16:13 2018', '__globals__': []}
### other file type
      载入txt文件：                    numpy.loadtxt()/numpy.savetxt()
      智能导入文本/csv文件：             numpy.genfromtxt()/numpy.recfromcsv()
      高速，有效率但numpy特有的二进制格式： numpy.save()/numpy.load()
      
      
## 2 统计
### 2.1 分析随机数
      >>> import scipy.stats as stats
      >>> genData = stats.norm.rvs(size=100)  # 正态分布  构造正态分布的数据
      >>> genData
      array([ -1.89900597e+00,   1.42347446e+00,   1.55025331e-01,
              -9.53805387e-01,   1.17844650e-01,   2.47414856e-02,
               7.52338519e-02,   3.22691747e-01,  -7.73500887e-01,
              -1.71049968e-01,  -8.75313181e-02,   1.15308582e+00,
               3.68230846e-01,  -1.40619387e+00,  -1.45113300e-01,
              -1.08841881e+00,  -2.05596645e-03,  -6.95715772e-01,
               1.11572204e+00,   1.09140200e+00,   8.42445188e-01,
              -1.42299696e+00,  -9.62754350e-01,   8.29186798e-01,
               6.79868491e-02,   6.70809439e-02,   7.98006740e-01,
              -3.26928882e-01,   9.97253101e-01,  -1.63403835e-02,
              -2.59363688e-01,   6.80434830e-01,   7.16566850e-01,
               1.41597139e+00,  -6.44108546e-01,  -6.39027308e-01,
              -2.09569932e-01,   1.17856038e+00,   2.00082614e-01,
              -9.31429653e-02,  -2.83913671e-01,  -1.52533552e+00,
              -4.91694812e-01,  -1.02957615e+00,  -1.18369719e+00,
              -4.27518794e-01,   8.26297396e-01,   2.18197102e+00,
              -1.24709807e+00,   1.47504406e+00,   1.14503540e+00,
               5.72429450e-01,  -6.11766024e-01,  -7.49379100e-01,
              -1.33583892e+00,   6.31105855e-01,  -6.77625959e-01,
               8.13069055e-02,   1.15980853e+00,   3.52402723e-01,
               4.92340724e-01,  -1.13968300e+00,  -7.70830078e-01,
              -3.91920152e-01,   6.36040081e-01,   9.50033033e-01,
              -2.44446569e-01,  -4.42092254e-01,   5.56164617e-01,
              -5.05047395e-01,   4.74920276e-01,  -1.43901726e-01,
              -1.29136910e-01,  -1.12429118e-01,   1.54329292e+00,
               7.92668535e-01,  -1.19529076e+00,   3.21446503e-01,
              -3.50084870e-01,  -3.00781899e-02,   8.88724841e-01,
               5.38023466e-01,  -1.37799713e-01,  -2.11638059e-01,
               1.42320311e+00,  -1.86396739e-01,  -2.24315915e-01,
               1.46752648e+00,   8.35256110e-01,  -3.21329846e-01,
               2.64920059e-01,   4.81203665e-01,   6.14011438e-01,
               1.16112327e-01,  -9.99141678e-01,  -7.07782435e-01,
              -7.05759467e-01,  -6.10016174e-02,   1.10852213e+00,
               9.11474021e-01])
      >>> genData.size
      100
#### 对一组随机取样进行拟合，找出最适合取样数据的概率密度函数的系数。
      >>> mean, std = stats.norm.fit(genData)  # 对一组随机取样进行拟合，找出最适合取样数据的概率密度函数的系数。
      >>> print('mean: ', mean, 'std :',std)
      ('mean: ', 0.061121386186079915, 'std :', 0.82127346658551625)
      
#### 偏度（skewnes）描述的是概率分布的偏斜程度，我们需要做一个偏度检验。
#### 该检验有两个返回值，其中第二个返回值是p-value，即观察到的数据服从正态分布的概率，取值为0-1  

      >>> stats.skewtest(genData)
      (0.119193821831338, 0.90512180122082975)
      我们有90%把握认为其服从正态分布

#### 峰度（kurtosis）描述的是概率分布的陡峭程度。该检验和偏度检验类似。
      >>> stats.kurtosistest(genData)
      (-1.165094383850513, 0.24398078994890893)
      
#### 正态性检验（normality test）可以检验数据服从正太分布的程度。
      >>> stats.normaltest(genData)
      (1.3716520904427674, 0.50367400018535591)
      
#### 使用Scipy我们很方便的得到数据所在区域中某一百分比处的数值
      >>> stats.scoreatpercentile(genData,95)
      1.423216674661004
      
#### 数值 某一百分比
>>> stats.percentileofscore(genData,1)
86.0

#### 使用matplot绘制生成数据的分布直方图
      >>> import matplotlib.pyplot as plt
      >>> plt.hist(genData)
      (array([  2.,   8.,  11.,  12.,  25.,  11.,  16.,   8.,   6.,   1.]), array([-1.89900597, -1.49090827, -1.08281057, -0.67471287, -0.26661517,
              0.14148253,  0.54958023,  0.95767792,  1.36577562,  1.77387332,
              2.18197102]), <a list of 10 Patch objects>)
      >>> plt.show()

### 2.2 样本比对（比较股票对数收益率）
[样本比对](https://www.ricequant.com/community/topic/3569/)

      均值检验可以检验两组不同的样本是否有相同的均值，返回值有两个，其中第二个为p-value,取值范围问为0~1

      Kolmogorov-Smirnov检验可以判断两组样本同分布的可能性

      在两支股票对数收益率的差值上运用Jarque-Bera正态性检验

### 3 信号处理

#### 3.1 检验股价的线性趋势
### 3.2 傅里叶分析
      对去除趋势后的信号进行滤波
      
## 4 数学优化
        优化算法尝试寻求某一问题的最优解，例如找到函数的最大值或最小值，函数可以是线性的也可以是非线性的。
        解可能也有一定的约束，例如大于1，。在scipy.optimize模块中提供了一些优化算法，包括最小二乘法。
   
#### 4.1拟合正弦波

      在上一章节，我们为去除趋势后的数据创建了一个简单的滤波器。我们可以回忆一下，一个正弦波优四个参数决定 Asin(ωx+φ)+k。
      A——振幅，当物体作轨迹符合正弦曲线的直线往复运动时，其值为行程的1/2。
      (ωx+φ)——相位，反映变量y所处的状态。
      φ——初相，x=0时的相位；反映在坐标系上则为图像的左右移动。
      k——偏距，反映在坐标系上则为图像的上移或下移。
      ω——角速度， 控制正弦周期(单位角度内震动的次数)。
   
#### 4.2积分（以高斯积分为例）
      高斯积分在概率论和连续傅里叶变换等的统一化等计算中有广泛的应用。
      在误差函数的定义中它也出现。虽然误差函数没有初等函数，但是高斯积分可以通过微积分学的手段解析求解。
      
      最常用的数值积分方法是quad,其它可用的积分方案有fixed_quad,quadrature,romberg.
#### 4.3  插值


